#
# Copyright TE-FOOD International Corp., All Rights Reserved.
#

version: '3'

#volumes:
#    peer1.titanium.masternodes.${NETWORK}.foodchain.te-food.com:
#    peer2.titanium.masternodes.${NETWORK}.foodchain.te-food.com:
#    peer3.titanium.masternodes.${NETWORK}.foodchain.te-food.com:
#    peer4.titanium.masternodes.${NETWORK}.foodchain.te-food.com:
#    peer5.titanium.masternodes.${NETWORK}.foodchain.te-food.com:
#    peer6.titanium.masternodes.${NETWORK}.foodchain.te-food.com:

networks:
    swarmnet:
        external:
            name: ${NETWORK}

services:
    
    peer1:
        image: hyperledger/fabric-peer:$IMAGE_TAG
        hostname: peer1.titanium.masternodes.${NETWORK}.foodchain.te-food.com
        networks:
            swarmnet:
                aliases:
                    - peer1.titanium.masternodes.${NETWORK}.foodchain.te-food.com
        volumes:
            - /var/run/:/host/var/run/
            - ${CRYPTO}/peerOrganizations/titanium.masternodes.${NETWORK}.foodchain.te-food.com/peers/peer1.titanium.masternodes.${NETWORK}.foodchain.te-food.com/msp:/etc/hyperledger/fabric/msp
            - ${CRYPTO}/peerOrganizations/titanium.masternodes.${NETWORK}.foodchain.te-food.com/peers/peer1.titanium.masternodes.${NETWORK}.foodchain.te-food.com/tls:/etc/hyperledger/fabric/tls
            - ${DATA}/masternodes/titanium/peer1:/var/hyperledger/production
        environment:
            - CORE_PEER_ID=peer1.titanium.masternodes.${NETWORK}.foodchain.te-food.com
            - CORE_PEER_ADDRESS=peer1.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_GOSSIP_BOOTSTRAP=peer1.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer1.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_LOCALMSPID=TitaniumMSP
            - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
            - CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=${NETWORK}
            - CORE_LOGGING_LEVEL=INFO
            #- CORE_LOGGING_LEVEL=DEBUG
            - CORE_PEER_TLS_ENABLED=true
            - CORE_PEER_GOSSIP_USELEADERELECTION=true
            - CORE_PEER_GOSSIP_ORGLEADER=false
            - CORE_PEER_PROFILE_ENABLED=true
            - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
            - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
            - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
        working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
        command: peer node start
        deploy:                                                                                                                                                                                                
            replicas: 1
            placement:
                constraints: [node.hostname == $SWARM_MANAGER]
            restart_policy:
                condition: any 
                delay: 5s
                max_attempts: 5

    peer2:
        image: hyperledger/fabric-peer:$IMAGE_TAG
        hostname: peer2.titanium.masternodes.${NETWORK}.foodchain.te-food.com
        networks:
            swarmnet:
                aliases:
                    - peer2.titanium.masternodes.${NETWORK}.foodchain.te-food.com
        volumes:
            - /var/run/:/host/var/run/
            - ${CRYPTO}/peerOrganizations/titanium.masternodes.${NETWORK}.foodchain.te-food.com/peers/peer2.titanium.masternodes.${NETWORK}.foodchain.te-food.com/msp:/etc/hyperledger/fabric/msp
            - ${CRYPTO}/peerOrganizations/titanium.masternodes.${NETWORK}.foodchain.te-food.com/peers/peer2.titanium.masternodes.${NETWORK}.foodchain.te-food.com/tls:/etc/hyperledger/fabric/tls
            - ${DATA}/masternodes/titanium/peer2:/var/hyperledger/production
        environment:
            - CORE_PEER_ID=peer2.titanium.masternodes.${NETWORK}.foodchain.te-food.com
            - CORE_PEER_ADDRESS=peer2.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_GOSSIP_BOOTSTRAP=peer2.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer2.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_LOCALMSPID=TitaniumMSP
            - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
            - CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=${NETWORK}
            - CORE_LOGGING_LEVEL=INFO
            #- CORE_LOGGING_LEVEL=DEBUG
            - CORE_PEER_TLS_ENABLED=true
            - CORE_PEER_GOSSIP_USELEADERELECTION=true
            - CORE_PEER_GOSSIP_ORGLEADER=false
            - CORE_PEER_PROFILE_ENABLED=true
            - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
            - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
            - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
        working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
        command: peer node start
        deploy:                     
            replicas: 1
            placement:
                constraints: [node.hostname == mainnet-worker-ovh]
            restart_policy:
                condition: any 
                delay: 5s
                max_attempts: 5

    peer3:
        image: hyperledger/fabric-peer:$IMAGE_TAG
        hostname: peer3.titanium.masternodes.${NETWORK}.foodchain.te-food.com
        networks:
            swarmnet:
                aliases:
                    - peer3.titanium.masternodes.${NETWORK}.foodchain.te-food.com
        volumes:
            - /var/run/:/host/var/run/
            - ${CRYPTO}/peerOrganizations/titanium.masternodes.${NETWORK}.foodchain.te-food.com/peers/peer3.titanium.masternodes.${NETWORK}.foodchain.te-food.com/msp:/etc/hyperledger/fabric/msp
            - ${CRYPTO}/peerOrganizations/titanium.masternodes.${NETWORK}.foodchain.te-food.com/peers/peer3.titanium.masternodes.${NETWORK}.foodchain.te-food.com/tls:/etc/hyperledger/fabric/tls
            - ${DATA}/masternodes/titanium/peer3:/var/hyperledger/production
        environment:
            - CORE_PEER_ID=peer3.titanium.masternodes.${NETWORK}.foodchain.te-food.com
            - CORE_PEER_ADDRESS=peer3.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_GOSSIP_BOOTSTRAP=peer3.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer3.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_LOCALMSPID=TitaniumMSP
            - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
            - CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=${NETWORK}
            - CORE_LOGGING_LEVEL=INFO
            #- CORE_LOGGING_LEVEL=DEBUG
            - CORE_PEER_TLS_ENABLED=true
            - CORE_PEER_GOSSIP_USELEADERELECTION=true
            - CORE_PEER_GOSSIP_ORGLEADER=false
            - CORE_PEER_PROFILE_ENABLED=true
            - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
            - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
            - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
        working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
        command: peer node start
        deploy:                     
            replicas: 1
            placement:
                constraints: [node.hostname == $SWARM_MANAGER]
            restart_policy:
                condition: any 
                delay: 5s
                max_attempts: 5

    peer4:
        image: hyperledger/fabric-peer:$IMAGE_TAG
        hostname: peer4.titanium.masternodes.${NETWORK}.foodchain.te-food.com
        networks:
            swarmnet:
                aliases:
                    - peer4.titanium.masternodes.${NETWORK}.foodchain.te-food.com
        volumes:
            - /var/run/:/host/var/run/
            - ${CRYPTO}/peerOrganizations/titanium.masternodes.${NETWORK}.foodchain.te-food.com/peers/peer4.titanium.masternodes.${NETWORK}.foodchain.te-food.com/msp:/etc/hyperledger/fabric/msp
            - ${CRYPTO}/peerOrganizations/titanium.masternodes.${NETWORK}.foodchain.te-food.com/peers/peer4.titanium.masternodes.${NETWORK}.foodchain.te-food.com/tls:/etc/hyperledger/fabric/tls
            - ${DATA}/masternodes/titanium/peer4:/var/hyperledger/production
        environment:
            - CORE_PEER_ID=peer4.titanium.masternodes.${NETWORK}.foodchain.te-food.com
            - CORE_PEER_ADDRESS=peer4.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_GOSSIP_BOOTSTRAP=peer4.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer4.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_LOCALMSPID=TitaniumMSP
            - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
            - CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=${NETWORK}
            - CORE_LOGGING_LEVEL=INFO
            #- CORE_LOGGING_LEVEL=DEBUG
            - CORE_PEER_TLS_ENABLED=true
            - CORE_PEER_GOSSIP_USELEADERELECTION=true
            - CORE_PEER_GOSSIP_ORGLEADER=false
            - CORE_PEER_PROFILE_ENABLED=true
            - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
            - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
            - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
        working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
        command: peer node start
        deploy:                     
            replicas: 0
            placement:
                constraints: [node.hostname == Trackmyfood]
            restart_policy:
                condition: any 
                delay: 5s
                max_attempts: 5

    peer5:
        image: hyperledger/fabric-peer:$IMAGE_TAG
        hostname: peer5.titanium.masternodes.${NETWORK}.foodchain.te-food.com
        networks:
            swarmnet:
                aliases:
                    - peer5.titanium.masternodes.${NETWORK}.foodchain.te-food.com
        volumes:
            - /var/run/:/host/var/run/
            - ${CRYPTO}/peerOrganizations/titanium.masternodes.${NETWORK}.foodchain.te-food.com/peers/peer5.titanium.masternodes.${NETWORK}.foodchain.te-food.com/msp:/etc/hyperledger/fabric/msp
            - ${CRYPTO}/peerOrganizations/titanium.masternodes.${NETWORK}.foodchain.te-food.com/peers/peer5.titanium.masternodes.${NETWORK}.foodchain.te-food.com/tls:/etc/hyperledger/fabric/tls
            - ${DATA}/masternodes/titanium/peer5:/var/hyperledger/production
        environment:
            - CORE_PEER_ID=peer5.titanium.masternodes.${NETWORK}.foodchain.te-food.com
            - CORE_PEER_ADDRESS=peer5.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_GOSSIP_BOOTSTRAP=peer5.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer5.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_LOCALMSPID=TitaniumMSP
            - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
            - CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=${NETWORK}
            - CORE_LOGGING_LEVEL=INFO
            #- CORE_LOGGING_LEVEL=DEBUG
            - CORE_PEER_TLS_ENABLED=true
            - CORE_PEER_GOSSIP_USELEADERELECTION=true
            - CORE_PEER_GOSSIP_ORGLEADER=false
            - CORE_PEER_PROFILE_ENABLED=true
            - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
            - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
            - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
        working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
        command: peer node start
        deploy:                     
            replicas: 0
            placement:
                constraints: [node.hostname == tefmaster]
            restart_policy:
                condition: any 
                delay: 5s
                max_attempts: 5

    peer6:
        image: hyperledger/fabric-peer:$IMAGE_TAG
        hostname: peer6.titanium.masternodes.${NETWORK}.foodchain.te-food.com
        networks:
            swarmnet:
                aliases:
                    - peer6.titanium.masternodes.${NETWORK}.foodchain.te-food.com
        volumes:
            - /var/run/:/host/var/run/
            - ${CRYPTO}/peerOrganizations/titanium.masternodes.${NETWORK}.foodchain.te-food.com/peers/peer6.titanium.masternodes.${NETWORK}.foodchain.te-food.com/msp:/etc/hyperledger/fabric/msp
            - ${CRYPTO}/peerOrganizations/titanium.masternodes.${NETWORK}.foodchain.te-food.com/peers/peer6.titanium.masternodes.${NETWORK}.foodchain.te-food.com/tls:/etc/hyperledger/fabric/tls
            - ${DATA}/masternodes/titanium/peer6:/var/hyperledger/production
        environment:
            - CORE_PEER_ID=peer6.titanium.masternodes.${NETWORK}.foodchain.te-food.com
            - CORE_PEER_ADDRESS=peer6.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_GOSSIP_BOOTSTRAP=peer6.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer6.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_LOCALMSPID=TitaniumMSP
            - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
            - CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=${NETWORK}
            - CORE_LOGGING_LEVEL=INFO
            #- CORE_LOGGING_LEVEL=DEBUG
            - CORE_PEER_TLS_ENABLED=true
            - CORE_PEER_GOSSIP_USELEADERELECTION=true
            - CORE_PEER_GOSSIP_ORGLEADER=false
            - CORE_PEER_PROFILE_ENABLED=true
            - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
            - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
            - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
        working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
        command: peer node start
        deploy:                     
            replicas: 0
            placement:
                constraints: [node.hostname == Dan-Mainnet]
            restart_policy:
                condition: any 
                delay: 5s
                max_attempts: 5

    peer7:
        image: hyperledger/fabric-peer:$IMAGE_TAG
        hostname: peer7.titanium.masternodes.${NETWORK}.foodchain.te-food.com
        networks:
            swarmnet:
                aliases:
                    - peer7.titanium.masternodes.${NETWORK}.foodchain.te-food.com
        volumes:
            - /var/run/:/host/var/run/
            - ${CRYPTO}/peerOrganizations/titanium.masternodes.${NETWORK}.foodchain.te-food.com/peers/peer7.titanium.masternodes.${NETWORK}.foodchain.te-food.com/msp:/etc/hyperledger/fabric/msp
            - ${CRYPTO}/peerOrganizations/titanium.masternodes.${NETWORK}.foodchain.te-food.com/peers/peer7.titanium.masternodes.${NETWORK}.foodchain.te-food.com/tls:/etc/hyperledger/fabric/tls
            - ${DATA}/masternodes/titanium/peer7:/var/hyperledger/production
        environment:
            - CORE_PEER_ID=peer7.titanium.masternodes.${NETWORK}.foodchain.te-food.com
            - CORE_PEER_ADDRESS=peer7.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_GOSSIP_BOOTSTRAP=peer7.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer7.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_LOCALMSPID=TitaniumMSP
            - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
            - CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=${NETWORK}
            - CORE_LOGGING_LEVEL=INFO
            #- CORE_LOGGING_LEVEL=DEBUG
            - CORE_PEER_TLS_ENABLED=true
            - CORE_PEER_GOSSIP_USELEADERELECTION=true
            - CORE_PEER_GOSSIP_ORGLEADER=false
            - CORE_PEER_PROFILE_ENABLED=true
            - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
            - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
            - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
        working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
        command: peer node start
        deploy:                     
            replicas: 0
            placement:
                constraints: [node.hostname == mainnet-worker-contabo]
            restart_policy:
                condition: any 
                delay: 5s
                max_attempts: 5

    peer8:
        image: hyperledger/fabric-peer:$IMAGE_TAG
        hostname: peer8.titanium.masternodes.${NETWORK}.foodchain.te-food.com
        networks:
            swarmnet:
                aliases:
                    - peer8.titanium.masternodes.${NETWORK}.foodchain.te-food.com
        volumes:
            - /var/run/:/host/var/run/
            - ${CRYPTO}/peerOrganizations/titanium.masternodes.${NETWORK}.foodchain.te-food.com/peers/peer8.titanium.masternodes.${NETWORK}.foodchain.te-food.com/msp:/etc/hyperledger/fabric/msp
            - ${CRYPTO}/peerOrganizations/titanium.masternodes.${NETWORK}.foodchain.te-food.com/peers/peer8.titanium.masternodes.${NETWORK}.foodchain.te-food.com/tls:/etc/hyperledger/fabric/tls
            - ${DATA}/masternodes/titanium/peer8:/var/hyperledger/production
        environment:
            - CORE_PEER_ID=peer8.titanium.masternodes.${NETWORK}.foodchain.te-food.com
            - CORE_PEER_ADDRESS=peer8.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_GOSSIP_BOOTSTRAP=peer8.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer8.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_LOCALMSPID=TitaniumMSP
            - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
            - CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=${NETWORK}
            - CORE_LOGGING_LEVEL=INFO
            #- CORE_LOGGING_LEVEL=DEBUG
            - CORE_PEER_TLS_ENABLED=true
            - CORE_PEER_GOSSIP_USELEADERELECTION=true
            - CORE_PEER_GOSSIP_ORGLEADER=false
            - CORE_PEER_PROFILE_ENABLED=true
            - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
            - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
            - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
        working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
        command: peer node start
        deploy:                     
            replicas: 0
            placement:
                constraints: [node.hostname == mainnet-worker-contabo]
            restart_policy:
                condition: any 
                delay: 5s
                max_attempts: 5

    peer9:
        image: hyperledger/fabric-peer:$IMAGE_TAG
        hostname: peer9.titanium.masternodes.${NETWORK}.foodchain.te-food.com
        networks:
            swarmnet:
                aliases:
                    - peer9.titanium.masternodes.${NETWORK}.foodchain.te-food.com
        volumes:
            - /var/run/:/host/var/run/
            - ${CRYPTO}/peerOrganizations/titanium.masternodes.${NETWORK}.foodchain.te-food.com/peers/peer9.titanium.masternodes.${NETWORK}.foodchain.te-food.com/msp:/etc/hyperledger/fabric/msp
            - ${CRYPTO}/peerOrganizations/titanium.masternodes.${NETWORK}.foodchain.te-food.com/peers/peer9.titanium.masternodes.${NETWORK}.foodchain.te-food.com/tls:/etc/hyperledger/fabric/tls
            - ${DATA}/masternodes/titanium/peer9:/var/hyperledger/production
        environment:
            - CORE_PEER_ID=peer9.titanium.masternodes.${NETWORK}.foodchain.te-food.com
            - CORE_PEER_ADDRESS=peer9.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_GOSSIP_BOOTSTRAP=peer9.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer9.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_LOCALMSPID=TitaniumMSP
            - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
            - CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=${NETWORK}
            - CORE_LOGGING_LEVEL=INFO
            #- CORE_LOGGING_LEVEL=DEBUG
            - CORE_PEER_TLS_ENABLED=true
            - CORE_PEER_GOSSIP_USELEADERELECTION=true
            - CORE_PEER_GOSSIP_ORGLEADER=false
            - CORE_PEER_PROFILE_ENABLED=true
            - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
            - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
            - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
        working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
        command: peer node start
        deploy:                     
            replicas: 0
            placement:
                constraints: [node.hostname == mainnet-worker-contabo]
            restart_policy:
                condition: any 
                delay: 5s
                max_attempts: 5

    peer10:
        image: hyperledger/fabric-peer:$IMAGE_TAG
        hostname: peer10.titanium.masternodes.${NETWORK}.foodchain.te-food.com
        networks:
            swarmnet:
                aliases:
                    - peer10.titanium.masternodes.${NETWORK}.foodchain.te-food.com
        volumes:
            - /var/run/:/host/var/run/
            - ${CRYPTO}/peerOrganizations/titanium.masternodes.${NETWORK}.foodchain.te-food.com/peers/peer10.titanium.masternodes.${NETWORK}.foodchain.te-food.com/msp:/etc/hyperledger/fabric/msp
            - ${CRYPTO}/peerOrganizations/titanium.masternodes.${NETWORK}.foodchain.te-food.com/peers/peer10.titanium.masternodes.${NETWORK}.foodchain.te-food.com/tls:/etc/hyperledger/fabric/tls
            - ${DATA}/masternodes/titanium/peer10:/var/hyperledger/production
        environment:
            - CORE_PEER_ID=peer10.titanium.masternodes.${NETWORK}.foodchain.te-food.com
            - CORE_PEER_ADDRESS=peer10.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_GOSSIP_BOOTSTRAP=peer10.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer10.titanium.masternodes.${NETWORK}.foodchain.te-food.com:7051
            - CORE_PEER_LOCALMSPID=TitaniumMSP
            - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
            - CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=${NETWORK}
            - CORE_LOGGING_LEVEL=INFO
            #- CORE_LOGGING_LEVEL=DEBUG
            - CORE_PEER_TLS_ENABLED=true
            - CORE_PEER_GOSSIP_USELEADERELECTION=true
            - CORE_PEER_GOSSIP_ORGLEADER=false
            - CORE_PEER_PROFILE_ENABLED=true
            - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
            - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
            - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
        working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
        command: peer node start
        deploy:                     
            replicas: 0
            placement:
                constraints: [node.hostname == mainnet-worker-contabo]
            restart_policy:
                condition: any 
                delay: 5s
                max_attempts: 5
